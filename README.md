<p align="center">
  <a href="#">
    <img width="150" src="https://cdn.jsdelivr.net/gh/ExtensionEngine/pbzcomnet-signedfile/media/logo.svg">
  </a>
</p>

# @extensionengine/pbzcomnet-signedfile

[![circleci build status](https://badgen.net/circleci/github/ExtensionEngine/pbzcomnet-signedfile/master?icon)](https://app.circleci.com/pipelines/github/ExtensionEngine/pbzcomnet-signedfile?branch=master)
[![install size](https://badgen.net/packagephobia/install/@extensionengine/pbzcomnet-signedfile)](https://packagephobia.now.sh/result?p=@extensionengine/pbzcomnet-signedfile)
[![npm package version](https://badgen.net/npm/v/@extensionengine/pbzcomnet-signedfile)](https://npm.im/@extensionengine/pbzcomnet-signedfile)
[![github license](https://badgen.net/github/license/ExtensionEngine/pbzcomnet-signedfile)](https://github.com/ExtensionEngine/pbzcomnet-signedfile/blob/master/LICENSE)
[![js @extensionengine style](https://badgen.net/badge/code%20style/@extensionengine/black)](https://github.com/ExtensionEngine/eslint-config)

> Extract & verify [PBZCOM@NET](http://com.pbz.hr/) balance reports

## Installation

    npm install @extensionengine/pbzcomnet-signedfile

## CLI

Extract report from signed XML envelope:

    npx -p @extensionengine/pbzcomnet-signedfile report-extract <report>

Verify signed XML envelope containing balance report:

    npx -p @extensionengine/pbzcomnet-signedfile report-verify <report>

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [extract](#extract)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
-   [verify](#verify)
    -   [Parameters](#parameters-1)
    -   [Examples](#examples-1)

### extract

Extract balance report from signed XML envelope

#### Parameters

-   `xmldoc`  

#### Examples

```javascript
const { extract, parse } = require('@extensionengine/pbzcomnet-signedfile');
const { readFileSync } = require('fs');

const xml = readFileSync('./reports/1110779471-20200721.rtf.sgn', 'utf-8');
const xmldoc = parse(xml);
extract(xmldoc).then(buffer => console.log('payload:\n', buffer.toString()));
```

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Buffer](https://nodejs.org/api/buffer.html)>** extracted payload

### verify

Verify signed XML envelope containing balance report

#### Parameters

-   `xmldoc`  

#### Examples

```javascript
const { parse, verify } = require('@extensionengine/pbzcomnet-signedfile');
const { readFileSync } = require('fs');

const xml = readFileSync('./reports/1110779471-20200721.rtf.sgn', 'utf-8');
const xmldoc = parse(xml);
const isVerified = verify(xmldoc);
console.log('result:', isVerified);
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** verification result
